import logging
import random
import asyncio

from telegram import Update
from telegram.ext import (
    Application,
    CommandHandler,
    MessageHandler,
    ContextTypes,
    filters,
)

# ================= Bot configuration ===================
BOT_TOKEN = "8102914320:AAGhC_xrDzZfVzRDyN8xErwtFdlVeuGkopI"

BOT_NAME = "Ú†ÙˆÙ¾Ø§Ù†"
BOT_TRIGGERS = ["Ú†ÙˆÙ¾Ø§Ù†", "chopan", "shepherd"]

# Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø¨Ø§ Ø­Ø§Ù„ Ùˆ Ù‡ÙˆØ§ÛŒ Ù…ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ø±ÙˆØ²ÛŒ Ùˆ Ø·Ù†Ø² Ø³Ù†Ú¯ÛŒÙ†â€ŒØªØ±
AUTO_MESSAGES = [
    "Ø§ÙˆÙ‡ Ù†Ù‡! ÛŒÚ©ÛŒ Ø§Ø² Ú¯ÙˆØ³ÙÙ†Ø¯Ø§ Ø±Ø³ÛŒØ¯Ù‡ Ø¨Ù‡ Ø¢Ø®Ø±ÛŒÙ† Ù‚Ø³Ù…Øª Stranger ThingsðŸ˜‚",
    "ÙØ±Ø¯Ø§ ØµØ¨Ø­ Ø§Ú¯Ù‡ Ù†Ù¾Ø±Ø³ÛŒØ¯Ù† Ú†Ø±Ø§ Ù‚Ù‡ÙˆÙ‡ Ù†ÛŒØ§ÙˆØ±Ø¯ÛŒØŒ ØºÛŒØ¨Ù… Ø²Ø¯Ù‡ Ø¨ÙˆØ¯Ù…!",
    "Ú¯Ù„Ù‡ Ø¨Ù‡Ù… Ú¯ÙØª Ú©Ù‡ ØªÙˆ Ø¢Ø¯Ù… Ø®Ø§ØµÛŒ Ù‡Ø³ØªÛŒ... Ø§ÙˆÚ©ÛŒ ÙˆÙ„Ø´ Ú©Ù†ØŒ Ø±Ø§Ø³Øª Ú¯ÙØªÙ†!",
    "Ú†ÙˆØ¨Ù… Ø§Ù¾Ø¯ÛŒØª Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ù‡ØŒ Ú©Ø³ÛŒ ÙˆØ±Ú˜Ù† Ø¬Ø¯ÛŒØ¯ Ø¯Ø§Ø±Ù‡ØŸ",
    "ÛŒÙ‡ Ú†ÙˆÙ¾Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù‡ Ú©Ù‡ Ù…ÙˆØ² Ú†ÛŒÙ‡ØŒ ÙˆÙ„ÛŒ Ù…Ù† ÙÙ‚Ø· Ø¨Ø§ØªÙ…!",
    "Ø¯Ø± Ø­Ø§Ù„ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§Ú¯ Ù…ÛŒÚ¯Ù…: Ø¨Ø§ ÙˆÙÛŒØ³ Ù…ÛŒØªÙˆÙ†Ù… Ø¯ÛŒÚ¯Ù‡ Ù…ÙˆØ²ÛŒÚ© Ù¾Ù„ÛŒ Ú©Ù†Ù…ØŸ",
    "ÙˆÙ‚ØªÛŒ Ø³Ú©ÙˆØª Ø·Ù„Ø§Ø³ØªØŒ Ù¾Ø³ Ú¯Ø±ÙˆÙ‡ Ù…Ø§ Ø§Ù„Ø§Ù† Ù…Ø³ØªØ¹Ù…Ø±Ù‡ Ù…ÛŒÙ…â€ŒÙ‡Ø§Ø³!",
    "Ú¯ÙˆØ³ÙÙ†Ø¯Ø§Ù… Ø§Ù…Ø´Ø¨ Ø®ÙˆØ§Ø¨ NFT Ù…ÛŒâ€ŒØ¯ÛŒØ¯Ù† ðŸ¤¯",
    "Ù‡Ø± ÙˆÙ‚Øª Ú©Ø§Ø± Ø¯Ø§Ø´ØªÛŒ ØµØ¯Ø§Ù… Ú©Ù†ØŒ ÙˆÙ„ÛŒ DM Ù‡Ù… Ø¨Ø¯Ù‡ Ø¨Ù‡ØªØ±Ù‡.",
    "Ø´Ø§ÛŒØ¯ Ù…Ù† Ú†ÙˆÙ¾Ø§Ù†Ù…ØŒ ÙˆÙ„ÛŒ Ø¯Ù„Ù… ÛŒÙ‡ Ø±ÙˆØ² Ù…Ø±Ø®ØµÛŒ Ø¨Ø§ Ø§ÛŒÙ†ØªØ±Ù†Øª Ù¾Ø±Ø³Ø±Ø¹Øª Ù…ÛŒâ€ŒØ®ÙˆØ§Ø¯.",
]

# ÙˆØ§Ú©Ù†Ø´ Ø¨Ù‡ Ø±ÛŒÙ¾Ù„Ø§ÛŒâ€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÛŒÙ…â€ŒÙ‡Ø§ÛŒ Ù…ØªØ¯Ø§ÙˆÙ„
REPLY_RESPONSES = [
    "ðŸ˜‚ðŸ˜‚ðŸ˜‚",
    "ðŸ’€ Ø§Ø³Ú©Ù„Øª Ø®ÙˆØ¯Ù…Ù… Ø®Ù†Ø¯ÛŒØ¯!",
    "ðŸ’€ Ø¯ÛŒÚ¯Ù‡ ØªÙ…ÙˆÙ…Ù‡! Ø§ÛŒÙ†Ùˆ Ø¨Ø§ÛŒØ¯ ÙØ±ÛŒÙ… Ú©Ù†Ù…!",
    "ðŸ˜‚ Ø§ÛŒÙˆÙ„ØŒ ØªØ±Ú©ÙˆÙ†Ø¯ÛŒ!",
    "ðŸ’€ Ù…ØºØ²Ù… Ø±ÛŒâ€ŒØ§Ø³ØªØ§Ø±Øª Ø´Ø¯ Ø¨Ø§ Ø§ÛŒÙ† Ø­Ø±ÙØª!",
    "ðŸ˜‚ ÙÙ‚Ø· ÛŒÙ‡ Ú¯ÙˆØ³ÙÙ†Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø§ÛŒÙ†Ø¬ÙˆØ±ÛŒ Ø¬ÙˆØ§Ø¨ Ù…ÛŒâ€ŒØ¯Ù‡!",
    "ðŸ’€ðŸ˜‚ Ø§ÛŒÙ†Ùˆ Ø¨Ø±Ø§ÛŒ Ù¾Ø§Ø¯Ú©Ø³Øª Ø¨Ø§ÛŒØ¯ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒÙ…!",
    "ðŸ˜‚ðŸ˜‚ Ø§ÛŒÙ†Ùˆ Ø¨Ø°Ø§Ø± ØªÙˆ Ø±Ø²ÙˆÙ…Ù‡â€ŒØ§Øª Ø¨Ù†ÙˆÛŒØ³!",
    "ðŸ’€ Ø¯Ø§Ø¯Ø§Ø´ Ù…ØºØ²Ù… Ù‡Ù†Ú¯ Ú©Ø±Ø¯!",
    "ðŸ˜‚ Ø§Ø³ØªØ§Ø¯ Ø·Ù†Ø² Ø®ÙˆØ¯ØªÛŒ!",
    "ðŸ’€ Ø®Ø¨ Ø¯ÛŒÚ¯Ù‡ØŒ ØªØ±Ú©ÙˆÙ†Ø¯ÛŒ Ù…Ø§Ø±Ùˆ!",
    "ðŸ˜‚ðŸ˜‚ Ø§ÛŒÙ† ÛŒÙ‡ Ø³Ø·Ø­ Ø¨Ø§Ù„Ø§ØªØ±Ù‡!",
    "ðŸ’€ Ø§ÛŒÙ† Ø­Ø±ÙØª Ø±Ùˆ Ú¯ÙˆÚ¯Ù„ Ø³Ø±Ú† Ú©Ø±Ø¯Ù…ØŒ Ø¬ÙˆØ§Ø¨ Ù†Ø¯Ø§Ø¯!",
    "ðŸ˜‚ Ø®Ø¯Ø§ÙˆÚ©ÛŒÙ„ÛŒ Ø²Ø¯ÛŒ ÙˆØ³Ø· Ù‡Ø¯Ù!",
    "ðŸ’€ Ú©Ù¾Ø´Ù† Ú¯Ø°Ø§Ø´ØªÙ… Ø²ÛŒØ± Ø¹Ú©Ø³ Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ø§Ù„Ø§Ù†!",
    "ðŸ˜‚ Ø§ÛŒÙ†Ù‚Ø¯ Ø®ÙˆØ¨ Ø¨ÙˆØ¯ØŒ Û³ Ø¨Ø§Ø± Ø®ÙˆÙ†Ø¯Ù…Ø´!",
    "ðŸ’€ Ø±ÙˆØ§Ù†ÛŒ Ø´Ø¯ÛŒÙ… Ù‡Ù…Ú¯ÛŒ!",
    "ðŸ˜‚ðŸ˜‚ Ø¨ÛŒØ§ Ø¯Ø³ØªØªÙˆ Ø¨Ø²Ù† Ø¨Ù‡ Ù…ÛŒÚ©Ø±ÙˆÙÙ†ØŒ Ø§Ø³ØªÙ†Ø¯Ø¢Ù¾ Ø¨ÙˆØ¯!",
    "ðŸ’€ Ø®Ù†Ø¯Ù‡â€ŒØ§Ù… Ù¾Ø±ÛŒØ¯ØŒ Ø¨Ø¹Ø¯ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ø¨Ø±Ú¯Ø´Øª!",
    "ðŸ˜‚ Ø§ÛŒÙ†Ùˆ Ø¨Ø§ÛŒØ¯ Ø¨Ø°Ø§Ø±ÛŒÙ… ØªÙˆ Ú©ØªØ§Ø¨ Ø¯Ø±Ø³ÛŒ!",
    "ðŸ’€ Ø§ÛŒÙ† Ø­Ø±ÙØª ØªÙˆÛŒ Ø²Ù†Ø¯Ú¯ÛŒÙ†Ø§Ù…Ù‡ Ù…Ù† Ø§ÙˆÙ…Ø¯!",
    "ðŸ˜‚ Ø­ØªÛŒ Ú¯ÙˆØ³ÙÙ†Ø¯Ø§Ù…Ù… Ø®Ù†Ø¯ÛŒØ¯Ù†!",
    "ðŸ’€ Ú†Ø±Ø§ Ø§ÛŒÙ†Ù‚Ø¯Ø± Ø¨Ø§Ø­Ø§Ù„ÛŒ Ø¢Ø®Ù‡ØŸ",
    "ðŸ˜‚ ØªÙˆØ±Ùˆ Ø®Ø¯Ø§ Ø¯ÛŒÚ¯Ù‡ Ù†Ú¯ÙˆØŒ Ù†ÙØ³Ù… Ú¯Ø±ÙØª!",
    "ðŸ’€ðŸ¤£ Ø§ÛŒÙ†Ùˆ Ú©Ù¾ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù… ØªÙˆ Ø¨ÛŒÙˆÛŒ Ø§ÛŒÙ†Ø³ØªØ§!",
    "ðŸ˜‚ Ø®ÙˆØ¯Ù…Ù… Ù†ÙÙ‡Ù…ÛŒØ¯Ù… Ú†ÛŒ Ø´Ø¯ ÙˆÙ„ÛŒ Ø®Ù†Ø¯ÛŒØ¯Ù…!",
    "ðŸ’€ Ø¨Ø±Ùˆ Ø§Ø³ØªØ§Ø¯! ÙÙ‚Ø· Ø¨Ø±Ùˆ!",
    "ðŸ˜‚ Ø§Ú¯Ù‡ Ù†Ø®Ù†Ø¯Ù… ÙˆØ¬Ø¯Ø§Ù† Ø¯Ø±Ø¯ Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù…!",
    "ðŸ’€ ØªÙˆ Ø§Ø² Ø¯Ù†ÛŒØ§ÛŒ Ù…ÛŒÙ…â€ŒÙ‡Ø§ ÙØ±Ø³ØªØ§Ø¯Ù‡ Ø´Ø¯ÛŒ!",
    "ðŸ˜‚ Ù¾Ø®Ø´ Ø²Ù†Ø¯Ù‡ Ù†Ø§Ø¨ÙˆØ¯ÛŒ Ù…Ù†!",
    "ðŸ’€ Ù‚Ø±Øµ Ø®Ù†Ø¯Ù‡â€ŒÙ…Ùˆ Ù†Ø®ÙˆØ±Ø¯Ù…ØŒ ØªÙˆ Ø¬Ø§ÛŒÚ¯Ø²ÛŒÙ† Ø´Ø¯ÛŒ!",
    "ðŸ˜‚ Ø±ÙˆØ­Ù… ØªØ±Ú©ÛŒØ¯ Ø¨Ø§ Ø§ÛŒÙ† Ø¬Ù…Ù„Ù‡!",
    "ðŸ’€ Ù…Ù† Ø¯ÛŒÚ¯Ù‡ Ø­Ø±ÙÛŒ Ù†Ø¯Ø§Ø±Ù…ØŒ ØªÙˆ Ø¨Ø±Ø¯ÛŒ!",
    "ðŸ˜‚ Ù‡ÛŒÚ†ÛŒ ÙÙ‚Ø· Ø¨ØºØ¶ Ø®Ù†Ø¯Ù‡!",
    "ðŸ’€ Ø´ÙˆØ®ÛŒ Ø´ÙˆØ®ÛŒ Ø³Ú©ØªÙ‡ Ú©Ø±Ø¯ÛŒÙ…!",
    "ðŸ˜‚ ÛŒÙ‡ Ø¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø¨Ù‡ Ø®Ø¯Ø§!",
    "ðŸ’€ Ø­ØªÛŒ AI Ù‡Ù… Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø§ÛŒÙ†Ùˆ Ø¨Ø³Ø§Ø²Ù‡!",
    "ðŸ˜‚ Ø§ÛŒÙ† Ú©Ø§Ù…Ù†ØªØŒ Ø·Ù„Ø§Ø³Øª!",
    "ðŸ’€ ØªÛŒÙ…Ø§Ø±Ø³ØªØ§Ù† Ú©Ø¬Ø§Ø³ØªØŸ Ù…Ù† Ø­Ø§Ø¶Ø±Ù… Ø¨Ø±Ù…!",
    "ðŸ˜‚ ØªÙˆ Ø¨ÛŒØ§ Ø¨Ú¯Ùˆ Ú©ÛŒ Ø¨Ù‡Øª Ù†ÙˆØ´ØªÙ† ÛŒØ§Ø¯ Ø¯Ø§Ø¯ØŸ",
    "ðŸ’€ðŸ˜‚ Ø§ÛŒÙ†Ùˆ Ø¨ÙØ±Ø³ØªÛŒÙ… ÙˆØ§Ø³Ù‡ Ù†Ø§Ø³Ø§ Ø´Ø§ÛŒØ¯ Ø¨ÙÙ‡Ù…Ù† Ú†ÛŒ Ú¯ÙØªÛŒ!",
    "ðŸ˜‚ Ø§Ù„Ø§Ù† Ø¬Ø¯ÛŒ Ø¨ÙˆØ¯ ÛŒØ§ Ù…Ù† Ø¯Ø§Ø±Ù… Ø²ÛŒØ§Ø¯ Ù…ÛŒâ€ŒØ®Ù†Ø¯Ù…ØŸ",
    "ðŸ’€ Ø¬Ù…Ù„Ù‡â€ŒØª Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…Ù… Ø¢Ø³ÛŒØ¨ Ø²Ø¯!",
    "ðŸ˜‚ ØªØ§ Ø­Ø§Ù„Ø§ Ø§ÛŒÙ†Ù‚Ø¯Ø± Ø§Ø² ÛŒÙ‡ Ø¬Ù…Ù„Ù‡ Ø®ÙˆØ´Ù… Ù†ÛŒÙˆÙ…Ø¯Ù‡ Ø¨ÙˆØ¯!",
    "ðŸ’€ Ù…Ù† Ø¯ÛŒÚ¯Ù‡ Ù†Ù…ÛŒâ€ŒØªÙˆÙ†Ù…... Ø®Ù†Ø¯Ù… Ø¨Ù†Ø¯ Ù†Ù…ÛŒØ§Ø¯!",
    "ðŸ˜‚ ðŸ˜‚ ðŸ˜‚ ðŸ˜‚ Ø§ÛŒÙ†Ùˆ ØªÙˆ ØªÚ¯ Ú©Ù† ØªÙˆ ÙˆÛŒÚ©ÛŒÙ¾Ø¯ÛŒØ§!",
    "ðŸ’€ Ù¾Ø§Ø´Ùˆ Ø¨Ø±Ùˆ Ù†ÙˆÛŒØ³Ù†Ø¯Ù‡ Ø´Ùˆ Ø¨Ø§ Ø§ÛŒÙ† Ø¯ÛŒØ§Ù„ÙˆÚ¯Ø§!",
    "ðŸ˜‚ Ø§ÛŒÙ† Ø³Ø·Ø­ Ø§Ø² Ø·Ù†Ø² Ú©Ø¬Ø§Ø³Øª Ú©Ù‡ ÛŒØ§Ø¯ Ø¨Ú¯ÛŒØ±ÛŒÙ…ØŸ",
    "ðŸ’€ ÙÙ‚Ø· ÙˆØ§ÛŒØ³Ø§ Ø¯Ø§Ø±Ù… Ø¶Ø¨Ø· Ù…ÛŒâ€ŒÚ©Ù†Ù…!",
    "ðŸ˜‚ Ø¢ÙØ±ÛŒÙ†! ÛŒÙ‡ ØªØ±ÙˆÙ„ ÙˆØ§Ù‚Ø¹ÛŒ!",
    "ðŸ’€ Ø­ØªÛŒ Ø±ÙˆØ¨Ø§Ù‡ ØªÙˆ Ø¯Ø§Ø³ØªØ§Ù†Ù… Ø®Ù†Ø¯ÛŒØ¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø­Ø±Ù!",
    "ðŸ˜‚ Ø®Ù†Ø¯Ù‡â€ŒØ¯Ø§Ø±ØªØ±ÛŒÙ† ØªØ±Ø§Ú˜Ø¯ÛŒâ€ŒØ§ÛŒ Ø¨ÙˆØ¯ Ú©Ù‡ Ø´Ù†ÛŒØ¯Ù…!",
]


# Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ø¨Ø§ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ (50 Ú©Ù„Ù…Ù‡ØŒ Ù‡Ø± Ú©Ù„Ù…Ù‡ 3 Ø¬ÙˆØ§Ø¨)
KEYWORD_RESPONSES = {
    "Ù…Ø§Ù…Ø§Ù†": ["Ø§Ø±Ù‡ Ù…Ø§Ù…Ø§Ù† Ø¯Ø§Ø±Ù….", "Ù…Ø§Ù…Ø§Ù†Ù… Ù‡Ù…ÛŒØ´Ù‡ Ù¾Ø´ØªÙ…Ù‡!", "Ù…Ø§Ù…Ø§Ù† Ù…Ø¹Ù†ÛŒ Ù…Ù‡Ø±Ø¨ÙˆÙ†ÛŒ ÙØ§Ø±Øº Ø§Ø² Ù‡Ø± Ú†ÛŒØ²ÛŒÙ‡."],
    "Ù¾Ø¯Ø±": ["Ù¾Ø¯Ø± Ù…Ù†Ù… Ù…Ø«Ù„ Ú©ÙˆÙ‡ Ù¾Ø´ØªÙ…Ù‡.", "Ù¾Ø¯Ø± Ú†Ø´Ù…Ù‡ Ø§Ù†Ø±Ú˜ÛŒÙ‡.", "Ù¾Ø¯Ø± ØªÙˆ Ø²Ù†Ø¯Ú¯ÛŒ Ø®ÛŒÙ„ÛŒ Ù…Ù‡Ù…Ù‡."],
    "Ø¹Ø´Ù‚": ["Ø¹Ø´Ù‚ Ù…ÙˆØªÙˆØ±Ù‡ Ù‡Ù…Ù‡â€ŒÛŒ Ú©Ø§Ø¦Ù†Ø§ØªÙ‡.", "Ø¹Ø´Ù‚ Ø¨Ø§Ø´Ù‡ Ø²Ù†Ø¯Ú¯ÛŒ Ø±Ùˆ Ø¯ÙˆØ³ Ø¯Ø§Ø±ÛŒÙ….", "Ø¨Ø¯ÙˆÙ† Ø¹Ø´Ù‚ Ù‡Ù…Ù‡ Ú†ÛŒ Ø¨ÛŒâ€ŒÙ…Ø¹Ù†ÛŒÙ‡."],
    "Ø¯ÙˆØ³Øª": ["Ø¯ÙˆØ³Øª ÙˆØ§Ù‚Ø¹ÛŒ Ú©Ù…ÛŒØ§Ø¨Ù‡.", "Ø¯ÙˆØ³Øª ÛŒØ¹Ù†ÛŒ Ú©Ø³ÛŒ Ú©Ù‡ ÙˆØ³Ø· Ø·ÙˆÙØ§Ù† Ø¨Ø§Ø´Ù‡.", "Ø¯ÙˆØ³Øª Ø®ÙˆØ¨ Ù…Ø«Ù„ Ú¯ÙˆÙ‡Ø±Ù‡."],
    "Ø®ÙˆØ§Ø¨": ["Ø®ÙˆØ§Ø¨ Ø³Ù„Ø·Ø§Ù† Ø³Ù„Ø§Ù…ØªÛŒÙ‡.", "Ø®ÙˆØ§Ø¨ Ù†ÛŒØ§Ø²Ù‡ Ù…Ø« Ø¢Ø¨ Ùˆ ØºØ°Ø§.", "Ø®ÙˆØ§Ø¨ Ú©Ù… ÛŒØ¹Ù†ÛŒ Ø®Ø±Ø§Ø¨ÛŒ Ø³ÛŒØ³ØªÙ…."],
    "Ú©Ø§Ø±": ["Ú©Ø§Ø± Ú©Ù†ØŒ Ù¾ÙˆÙ„ Ø¯Ø± Ø¨ÛŒØ§Ø±.", "Ú©Ø§Ø± Ú©Ø±Ø¯Ù† Ú¯Ø§Ù‡ÛŒ Ø®ÙˆØ´Ø­Ø§Ù„Ù‡.", "Ú©Ø§Ø± Ø¨Ø¯ÙˆÙ† Ø¹Ø´Ù‚ Ø¨ÛŒâ€ŒÙ…Ø¹Ù†ÛŒÙ‡."],
    "Ø¨Ø§Ø²ÛŒ": ["Ø¨Ø§Ø²ÛŒ Ù‡Ù…ÙˆÙ† Ø¢Ø±Ø§Ù…Ø´Ù‡.", "Ø¨Ø§Ø²ÛŒ Ø¨Ø¯ÙˆÙ† Ø³Ø±Ú¯Ø±Ù…ÛŒ Ø³Ø®ØªÙ‡.", "Ø¨Ø§Ø²ÛŒ Ø±ÙˆØ­ÛŒÙ‡ Ø±Ùˆ Ù‚ÙˆÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù‡."],
    "Ú©ØªØ§Ø¨": ["Ú©ØªØ§Ø¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø¯ÙˆØ³ØªÙ‡.", "Ú©ØªØ§Ø¨ Ø®ÙˆÙ†Ù‡ Ø¢Ø¯Ù…Ù‡.", "Ú©ØªØ§Ø¨ Ø®ÙˆÙ†Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØŒ Ø¢Ø¯Ù… Ø¯ÛŒÚ¯Ù‡ Ù†Ù…ÛŒâ€ŒØ´Ù‡."],
    "Ù‚Ù‡ÙˆÙ‡": ["Ù‚Ù‡ÙˆÙ‡ ØµØ¨Ø­ Ø¬Ø§Ù† Ù…ÛŒØ¯Ù‡.", "Ø¨ÛŒâ€ŒÙ‚Ù‡ÙˆÙ‡ Ù…Ø«Ù„ Ø§Ø¨Ø± Ø¨ÛŒ Ø¨Ø§Ø±ÙˆÙ†Ù‡.", "Ù‚Ù‡ÙˆÙ‡ Ø¨ÛŒâ€ŒØ´Ú© Ø­ÛŒØ±Ø§Ù†Ù‡."],
    "Ú†Ø§ÛŒ": ["Ú†Ø§ÛŒ Ù…Ø«Ù„ Ø¢ØºÙˆØ´Ù‡.", "Ú†Ø§ÛŒ Ø¨Ù‡ÙˆÙ†Ù‡ Ø¯ÙˆØ±Ù‡Ù…ÛŒÙ‡.", "Ú†Ø§ÛŒ Ø­Ø§Ù„Ø§ Ø­Ø§Ù„Ø§ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ø§Ø±Ù‡."],
    # ... Ø§Ø¯Ø§Ù…Ù‡ ØªØ§ 50 Ú©Ù„Ù…Ù‡
}

# Ø¬Ø¯Ø§ÙˆÙ„ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ø¨Ù‡ Ù…Ù†Ø´Ù† Ø¨Ø§ Ø¯ÛŒØ§Ù„ÙˆÚ¯â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡â€ŒØ±ÙˆØ² Ùˆ Ù…ÛŒÙ…â€ŒÙ‡Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ-Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ
MENTION_RESPONSES = {
    "general": [
        "Ú†ÛŒ Ø´Ø¯Ù‡ØŸ ØµØ¯Ø§Ù… Ø²Ø¯ÛŒ ÛŒØ§ ØµØ±ÙØ§ Ø§ÙˆÙ…Ø¯ÛŒ Ø§Ø³ØªØ§ØªÙˆØ³ Ø¨Ø°Ø§Ø±ÛŒØŸ",
        "Ø§ÛŒÙ†Ø¬Ø§Ù… Ú†ÙˆÙ† Ú†ÙˆØ¨Ù… Ú¯Ù… Ù†Ø´Ø¯Ù‡ØŒ ÙˆÙ„ÛŒ Ø­Ø§Ù„ Ø®ÙˆØ´Ù‡!",
        "Ø¨Ø§Ø²Ù… ÛŒÚ©ÛŒ Ø§Ø³Ù…Ù…Ùˆ Ú¯ÙØªØŒ Ø§Ù„Ø§Ù† 10K Ø³Ù†Ø³ÙˆØ± Ø±ÙØª!",
        "ÛŒÙ‡ Ú†ÙˆÙ¾Ø§Ù† ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø² Ø§ÛŒÙ†Ø¬Ø§ Ø±Ø¯ Ø´Ø¯Ù‡ Ø¨ÙˆØ¯ØŒ Ø§ÛŒÙ† ÙÙ‚Ø· Ú©Ù¾ÛŒâ€ŒÙ¾Ø³ØªÙ‡.",
        "Ø¯Ø§Ø±Ù‡ Ù…ÛŒØ´Ù‡ Ø´Ø¨ÛŒÙ‡ Ø§Ø³ØªØ±ÛŒÙ… TwitchØŒ Ù‡Ù…Ù‡ Ù†Ø§Ø¸Ø± Ù‡Ø³ØªÙ†!",
    ],
    "greeting": [
        "Ø³Ù„Ø§Ù… Ú¯ÙˆØ³ÙÙ†Ø¯ Ù…Ù†! Ú†Ø·ÙˆØ±ÛŒØŸ",
        "Hey bro! ØµØ¨Ø­ Ø¨Ø®ÛŒØ±.",
        "Ø¯Ø±ÙˆØ¯ØŒ ÙˆÙ„ÛŒ Ú©Ø¯ÙˆÙ… Ø³Ø±ÙˆØ±ØŸ",
        "Ø³Ù„Ø§Ù… Ø³Ù„Ø§Ù…ØŒ Ø³Ø¨Ú©Øª ØªØ§Ø²Ù‡â€ŒØ§Ø³ØŸ",
        "Ø³Ù„Ø§Ù…ØªÛŒâ€ŒØ§Øª Ú†Ø·ÙˆØ±Ù‡ØŸ Ú†Ø§ÛŒ Ùˆ Ù‚Ù‡ÙˆÙ‡ Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³ØŸ",
    ],
    "question": [
        "Ø§ÙˆÙ‡ Ø³ÙˆØ§Ù„ØŸ Ù…Ú¯Ù‡ ØªÙˆ quiz Ù‡Ø³ØªÛŒÙ…ØŸ",
        "Ù†Ù¾Ø±Ø³ØŒ ÙÙ‚Ø· vibe Ø±Ùˆ Ù†Ú¯Ù‡ Ø¯Ø§Ø±.",
        "ØªÙˆ Ø¨Ù¾Ø±Ø³ØŒ Ù…Ù† Ø¬ÙˆØ§Ø¨Ù… Ù…Ø«Ù„ memecoin Ø¨ÛŒâ€ŒØ«Ø¨Ø§ØªÙ‡.",
        "Ø§ÛŒÙ† Ø³ÙˆØ§Ù„ Ø±Ùˆ Ø¨Ø§ÛŒØ¯ Ø§Ø² Ú¯ÙˆØ³ÙÙ†Ø¯ Ø¨Ø¹Ø¯ÛŒ Ø¨Ù¾Ø±Ø³ÛŒ.",
        "Ú†Ø±Ø§ØŸ Ú†ÙˆÙ† Ù…ÛŒØ´Ù‡. Ù¾Ø§ÛŒØ§Ù† Ø¯Ø§Ø³ØªØ§Ù†!",
    ],
}

# Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ú†Øªâ€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ Ùˆ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ±
active_chats: dict[int, bool] = {}
chat_messages: dict[int, list] = {}

# =============== Logging setup ===================
logging.basicConfig(
    format="%(asctime)s - %(name)s - %(levelname)s - %(message)s",
    level=logging.INFO,
)
logger = logging.getLogger(__name__)

# =============== Bot Handlers ===================
async def send_random_message(context: ContextTypes.DEFAULT_TYPE, chat_id: int, reply_to_message_id=None) -> None:
    message = random.choice(AUTO_MESSAGES)
    await context.bot.send_message(
        chat_id=chat_id,
        text=message,
        reply_to_message_id=reply_to_message_id
    )

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    chat_id = update.effective_chat.id
    active_chats[chat_id] = True
    chat_messages.setdefault(chat_id, [])
    await update.message.reply_text("Ú†ÙˆÙ¾Ø§Ù† Ø§ÙˆÙ…Ø¯. Ú©Ø§Ø±Øª Ú†ÛŒÙ‡ØŸ")

async def help_command(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    await update.message.reply_text("Ù…Ù† Ú†ÙˆÙ¾Ø§Ù†Ù…! Ù…Ù†Ø´Ù†ØŒ Ø±ÛŒÙ¾Ù„Ø§ÛŒ ÛŒØ§ ÙÙ‚Ø· Ø²Ù†Ú¯ Ø¨Ø²Ù†Ø› ÛŒÙ‡ Ù…ÛŒÙ… ÙˆØ§Ø³Øª Ø¯Ø§Ø±Ù….")

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    chat_id = update.effective_chat.id
    message = update.message
    text = (message.text or "").lower()
    entities = message.entities or []

    # Ø«Ø¨Øª ÙØ¹Ø§Ù„ÛŒØª Ú†Øª
    if chat_id not in active_chats:
        active_chats[chat_id] = True
    chat_messages.setdefault(chat_id, [])
    chat_messages[chat_id].append(message)
    if len(chat_messages[chat_id]) > 50:
        chat_messages[chat_id] = chat_messages[chat_id][-50:]

    # ÙˆØ§Ú©Ù†Ø´ Ø¨Ù‡ Ø±ÛŒÙ¾Ù„Ø§ÛŒ Ø±ÙˆÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Øª
    if message.reply_to_message and message.reply_to_message.from_user.is_bot:
        reaction = random.choice(REPLY_RESPONSES)
        await message.reply_text(reaction)
        return

    # ÙˆØ§Ú©Ù†Ø´ Ø¨Ù‡ Ú©Ù„Ù…Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ
    for keyword, replies in KEYWORD_RESPONSES.items():
        if keyword in text:
            await message.reply_text(random.choice(replies))
            return

    # Ø¨Ø±Ø±Ø³ÛŒ mention Ø¢ÛŒØ¯ÛŒ Ø¨Ø§Øª Ø¯Ø± message entities
    is_bot_mentioned = any(
        e.type == "mention" and message.text[e.offset:e.offset + e.length].lower() == "@choponvip_bot"
        for e in entities
    )

    # ÛŒØ§ Ø§Ú¯Ø± Ø§Ø³Ù… ÛŒØ§ Ú©Ù„Ù…Ù‡ Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø§Øª Ø¯Ø§Ø®Ù„ Ù…ØªÙ† Ø¨ÙˆØ¯
    if is_bot_mentioned or any(trigger in text for trigger in BOT_TRIGGERS):
        if any(greet in text for greet in ["Ø³Ù„Ø§Ù…", "hi", "hello", "Ø¯Ø±ÙˆØ¯"]):
            responses = MENTION_RESPONSES["greeting"]
        elif any(q in text for q in ["?", "ØŸ", "Ú†Ø±Ø§", "Ú†Ø·ÙˆØ±", "Ú©ÛŒ", "Ú©Ø¬Ø§", "Ú†Ù‡", "Ø¢ÛŒØ§"]):
            responses = MENTION_RESPONSES["question"]
        else:
            responses = MENTION_RESPONSES["general"]

        await message.reply_text(random.choice(responses))


async def periodic_messages(context: ContextTypes.DEFAULT_TYPE) -> None:
    for chat_id in list(active_chats.keys()):
        try:
            reply_to = None
            if chat_messages.get(chat_id) and random.random() < 0.4:
                msg = random.choice(chat_messages[chat_id])
                reply_to = msg.message_id
            await send_random_message(context, chat_id, reply_to_message_id=reply_to)
        except Exception as e:
            logger.error(f"Error sending to chat {chat_id}: {e}")
            active_chats.pop(chat_id, None)

async def schedule_random_periodic_messages(app: Application) -> None:
    while True:
        interval = random.randint(300, 3600)
        await asyncio.sleep(interval)
        await periodic_messages(app)

# ================= Main ===================


def main() -> None:
    app = Application.builder().token(BOT_TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("help", help_command))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

    asyncio.get_event_loop().create_task(schedule_random_periodic_messages(app))

    logger.info("Ú†ÙˆÙ¾Ø§Ù† Ø¢Ù…Ø§Ø¯Ù‡ Ø§Ø³Øª...")
    app.run_polling(allowed_updates=Update.ALL_TYPES)

if __name__ == "__main__":
    main()
